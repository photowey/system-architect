# 系统架构设计师

## 一、绪论

### 1.软件系统架构

#### 1.1.概念

- 软件系统架构是关于软件系统的结构、行为、和属性的<font style="color: red">**高级抽象**</font>。
  - 在描述阶段: 其对象是直接构成系统的抽象组件以及各个组件之间的连接规则，特别是相对细致的描述组件之间的<font style="color: red">**通信**</font>。
  - 在实现阶段: 这些抽象组件被细化为实际组件，比如具体的类或者对象。
- 软件系统架构不仅指定了软件系统的<font style="color: red">**组织结构**</font>和<font style="color: red">**拓扑结构**</font>，而且显示了系统需求和构成组件之间的对应关系，包括<font style="color: red">**设计决策**</font>的<font style="color: green">**基本方法**</font>和<font style="color: green">**基本理论**</font>

#### 1.2.企业软件架构

- 企业<font style="color: red">**需求**</font>是软件架构发展的<font style="color: red">**引擎**</font>

### 2.系统架构师知识结构

- 战略规划能力
- 业务流程建模能力
- 信息数据架构能力
- 技术架构选择和实现能力
- 应用系统架构的解决和实现能力
- 基础IT知识和基础设施、资源调配的能力
-  信息安全技术支持和管理保障能力
- IT审计、治理和基础需求分析、获取能力
- 面向软件系统可靠性与系统生命周期的质量保障服务能力

## 二、计算机与网络基础知识

> <font style="color: red">**概念**</font>

- 计算机系统由硬件和软件两部分组成。
- 软件分类
  - 系统软件
    - 系统软件支持应用软件的运行，为用户开发应用软件提供平台他，用户可以使用它，但不能随机膝盖它。（操作系统、语言处理程序、连接程序、诊断程序、数据库管理系统等）
  - 应用软件
    - 指计算机用户利用计算机的软、引荐资源为莫i一专门的应用目的而开发的软件。

### 2.1.操作系统知识

#### 2.1.1.操作系统

> 操作系统(Operating System, OS)
>
> > 是计算机系统的核心系统软件，其他软件是建立在操作系统基础上的，并在操作系统的统一管理和支持下运行。

- 操作系统的作用
  - 通过资源管理，提高计算机系统的效率
  - 改善人机界面，向用户提供友好的工作环境
- 操作系统的分类
  - 单用户操作系统 && 批处理操作系统
  - 分时操作系统 && 实时操作系统
  - 网络操作系统 && 分布式操纵系统
  - 嵌入式操作系统
- 操作系统的特征
  - 并发性(concurrency)
  - 共享性(sharing)
  - 虚拟性(virtual)
  - 不确定性(non-determinacy)
- 操作系统的功能
  - 进程管理
  - 文件管理
  - 存储管理
  - 设备管理
  - 作业管理



#### 2.1.2.进程

##### <font style="color: red">**1.定义**</font>

> 进程(process) 是资源分配和独立运行的<font style="color: red">**基本单位**</font>。
>
> 进程是程序的一次执行，该程序可以和其他程序并发执行。
>
> > 进程 ~= 程序 + 数据 + 进程控制块(Process Control Block, PCB) 
> >
> > PCB: 描述了进程的基本情况，是进程存在的唯一标识。
> >
> > 程序: 静态的<font style="color: red">**指令序列**</font>。
> >
> > 进程: 为执行该程序的线程而保留的<font style="color: red">**资源集**</font>。



##### <font style="color: red">**2.分类**</font>

- 系统进程 && 用户进程

- 父进程 && 子进程



进程状态模型:
![进程状态及其转换](./assests/process_state_exchange.jpg)



##### <font style="color: red">**3.进程控制**</font>

对系统中所有进程从创建到消亡的全过程实施有效的控制。

> 进程控制是通过进程<font style="color: red">**控制原语**</font>来实现的，进程控制原语主要有：
>
> - 创建原语
> - 撤销原语
> - 挂起原语
> - 激活原语
> - 阻塞原语
> - 唤醒原语



-- -



##### <font style="color: red">**4.临界区**</font>

> 互斥临界区管理原则:
>
> > 有空则进、无空则等、有限等待、让权等待



-- -



##### <font style="color: red">**5.进程通信**</font>

通信(`communication`)是指进程间的<font style="color: red">**信息交换**</font>。

- 控制信息交换 (<font style="color: red">**低级别通信**</font>)

- 数据交换 (<font style="color: red">**高级别通信**</font>)
  
  - 通信类型:
    - 共享存储系统
    - 消息传递系统
    - 管道通信
  
  - 通信方式:
    - 直接通信
    - 间接通信

##### <font style="color: red">**6.管程**</font>:

管程是由一些共享数据、一组能为并发进程执行的作用在共享数据上的操作的集合、初始代码以及存取权组成的，也即<font style="color: red">**共享数据及在其上操作的一组过程就构成了管程**</font>。

> 进程可以在任何需要资源的时候调用管程，且在任意时刻最多只有一个进程能够真正的进入管程，其他的只能等待。
>
> > 管程提供了一种可以允许多进程安全有效地<font style="color: red">**共享抽象数据类型**</font>的机制。



-- -



##### <font style="color: red">**7.进程调度**</font>

> 进程调度即处理器调度(又称上下文切换)
>
> > 确定处理器在什么时候分配给哪一个进程。

- 调度方式

  > 当有更高优先级的进程到来时如果分配`CPU`。

  - 可剥夺
  - 不可剥夺

- 调度算法

  - 先来先服务
  - 时间片轮转(`round robin`)
  - 优先级调度
  - 多级反馈调度

- 死锁

  > 两个以上的进程都互相都因请求对方已经占有的资源，无限期地等待并无法继续运行下去的现象。
  
  - 原因:
  
    > 资源竞争及进程推进顺序非法。
    
  - 条件:
    - 互斥条件
    - 请求保持条件
    - 不可剥夺条件
  - 环路条件
  
  - 解决策略
  
    - 鸵鸟策略(不理睬策略)
    - 预防策略(破坏死锁的四个必要条件之一)
    - 避免策略(精心地分配资源，动态地回避死锁)
    - 检测与解除死锁(一旦发生死锁，系统不但能检测出，还能解除)

#####  <font style="color: red">**8.线程**</font>

> 线程是进程中的一个实体，是被系统独立<font style="color: red">**分配**</font>和<font style="color: red">**调度**</font>的基本单位。



#### 2.1.3.存储管理

> 存储器是计算机系统的关键性资源，是存放各种信息的重要场所。
>
> > 高度、大容量、小体积
>
> 存储管理
>
> - 任务
>   - 如果提高主存的利用率
>   - 扩充主存
>   - 对主存信息实现有效保护
> - 对象
>   - 主存储器(主存 || 内存)
> - 功能
>   - 存储器的分配和回收
>   - 提高主存储器的利用率
>   - 存储保护
>   - 主存扩充
> - 方式 
>   - 分区存储管理
>   - 分页存储管理
>   - 分段存储管理
>   - 段页式存储管理
>   - 虚拟存储管理



##### <font style="color: red">**1.存储组织**</font>

> 功能: 存储技术和`CPU`寻址技术许可的范围内组织合理的存储结构。
>
> 存储器结构:
>
> - 寄存器-主存-外存
> - 寄存器(`register`)-缓存(`cache`)-主存(`primary storage`)-外存(`secondary storage`)

###### <font style="color: red">**1.1.逻辑地址**</font>:

> 用户程序经编译后，每个目标模块以 0 为基地址进行的顺序编址，它不是主存中的真实地址，是相对基地址而言的。
>
> - 相对地址
> - 程序地址
> - 虚拟地址

###### <font style="color: red">**1.2.物理地址**</font>:

> 主存中个存储单元的地址，从统一的基地址进行顺序编址，是主存中的真实地址，可以寻址并实际存在。
>
> 物理地址又称: 绝对地址

###### <font style="color: red">**1.3.存储空间**</font>:

> 逻辑地址空间(简称: 地址空间) 是逻辑地址的集合。
>
> 物理地址空间(简称: 存储空间) 是物理地址的集合。



##### <font style="color: red">**2.地址重定向**</font>:

> 地址重定向: 程序的逻辑地址被转换成主存的物理地址的过程。
>
> - 静态重定向
>   - 在程序执行之前进行地址重定向，即装入内存时重定向
> - 动态重定向
>   - 在程序执行期间，在每次存储访问之前进行地址重定向



#### 2.1.4.设备管理

> - 任务
>   - 保证在多道程序环境下，当多个进程竞争使用设备式，按照一定策略分配和管理各种设备，控制设备的各种操作，完成输入/输出设备与主存之间的数据交换。
> - 目标
>   - 提高设备利用率
>   - 为用户提供方便统一的界面
> - 功能
>   - 动态地掌握并记录设备的状态
>   - 设备分配和释放
>   - 缓存区管理
>   - 实现物理输入/输出设备的操作
>   - 提供设备使用的用户接口
>   - 设备的访问和控制
>   - 输入/输出缓冲和调度

##### <font style="color: red">**1.分类**</font>

- 使用特性
  - 存储设备
  - 输入/输出设备
  - 终端设备
  - 脱机设备
- 资源分配
  - 独占设备
  - 共享设备
  - 虚拟设备
- 从属关系
  - 系统设备
  - 用户设备
- 数据组织方式
  - 块设备(`Block Device`)
  - 字符设备(`Character Device`)
- 数据传输速率
  - 低速设备
  - 中速设备
  - 高速设备
- 输入/输出对象
  - 人机通信设备
  - 机机通信设备
- 是否可交互
  - 非交互式设备
  - 交互式设备

##### <font style="color: red">**2.技术**</font>

- 中断技术
- `DMA`技术(`Direct Memory Access`, `DMA`)
- 缓冲技术
- 虚设备与`SPOOLING(simultaneous peripheral operations online)`(外围设备联机)技术

##### <font style="color: red">**3.设备管理软件**</font>

- 中断处理程序
- 设备驱动程序
- 与设备无关的系统软件
- 用户层 I/O 软件

##### <font style="color: red">**4.数据传输控制方式**</font>

> 设备管理的主要任务之一是控制设备和内存或者`CPU`之间的数据传送。

- 程序控制方式
- 中断方式
- 直接存储访问方式
- 通道方式

##### <font style="color: red">**5.磁盘调度算法**</font>

> 磁盘是可供多个进程共享的设备。
>
> 磁盘调度是使各进程对磁盘的平均访问时间最小。

- 先来先服务(`first-come first-served, FCFS`)
- 最短寻道时间优先
- 扫描算法(`SCAN`)



#### 2.1.5.文件管理

> 文件(`File`): 具有符号名的、在逻辑上具有完整意义的一组相关信息项的集合。
>
> > 文件名的格式和长度因系统而异，操作系统根据文件名对去进行控制和管理
>
> > 文件管理系统: 操作系统中对文件进行统一管理的一组软件和相关数据(即被管理的文件)的集合，简称文件系统。
>
> > 文件系统的功能: 
> >
> > - 按名存取、
> > - 统一用户接口、
> > - 并发访问和控制
> > - 安全性控制
> > - 优化性能
> > - 差错恢复

##### <font style="color: red">**1.文件类型**</font>

- 性质和用途
  - 系统文件
  - 库文件
  - 用户文件
- 安全属性
  - 只读文件
  - 读写文件
  - 可执行文件
  - 不保护文件
- 组织形式
  - 普通文件
  - 目录文件
  - 设备文件(特殊文件)
- 信息保存期
  - 临时文件
  - 档案文件
  - 永久文件
- 信息流
  - 输入文件
  - 输出文件
  - 输入/输出文件

##### <font style="color: red">**2.文件的结构和组织**</font>

> 文件的结构: 文件的组织形式

逻辑结构: 从用户角度看到的文件组织形式

- 有结构的记录文件
- 无结构的字符流文件

物理结构: 从实现角度看到的文件在存储设备上的存放方式。

- 连续结构
- 链接结构
- 索引结构
- 多个物理结构的索引表

##### <font style="color: red">**3.文件的访问方法**</font>

> 文件访问方法: 读写文件存储设备上的一个物理块的方法。

访问方法:

- 顺序访问
  - 对文件中的信息按顺序依次读写的方式。
- 随机访问
  - 对文件中的信息可以按任意的次序随机地读写文件中的信息。

##### <font style="color: red">**4.文件存储设备管理**</font>

> 文件是存储在文件存储设备上的。
>
> 文件系统必须对文件存储设备上的空闲空间进行组织和管理，包括对空间空间的组织、分配与回收。
>
> - 文件存储设备
>
>   - 大容量
>
>   - 被多用户共享
>
>   - 多次被占用和释放	
> - 空闲空间管理方法
>   - 位图法
>   - 索引法
>   - 链接法
>

##### <font style="color: red">**5.文件控制块和目录**</font>

###### 5.1.文件控制块

> 系统为文革文件设置的用于<font style="color: red">**描述**</font>和<font style="color: red">**控制**</font>文件的<font style="color: red">**数据结构**</font>， 
>
> 它是文件存在的唯一标志(`File Control Block,FCB`)

- 基本信息
- 位置信息
- 存储控制信息
- 使用信息

###### 5.2.文件目录

> 文件目录是文件控制块的有序集合。

- 一级目录结构
- 二级目录结构
- 多级目录结构

##### <font style="color: red">**6.文件的使用**</font>

6.1.工作目录

> 工作目录也称当前目录，每个用户都有自己的工作目录，任一目录节点都可以被用户设置为工作目录，
>
> 文件系统允许用户--随时改变自己的工作目录。

- 目录管理命令
  - 建立目录
  - 显示工作目录
  - 改变目录
  - 删除目录

- 文件控制命令
  - 建立文件
  - 删除文件
  - 打开文件
  - 关闭文件
  - 改文件名
  - 该文件属性
- 文件存取命令
  - 读写文件
  - 显示文件内容
  - 复制文件
  - 等